<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <button onclick="downloader()">Download</button>
    <audio controls id="player" style="display: block;" type="audio/mpeg"></audio>

    <script>
        function downloader() {
            const link = "https://www.youtube.com/watch?v=W79pxftE_G8"
            const encodedLink = `http://127.0.0.1:3000/audio?link=${encodeURIComponent(link)}`
            fetch("http://127.0.0.1:3000/audio")
                .then((response) => {
                    const blob = new Blob(response, { 'type': 'audio/mpeg' })
                    const audioURL = URL.createObjectURL(blob)
                    player = document.querySelector("#player");
                    player.src = audioURL;
                    // blobFile = response.blob()
                    // blobURL = URL.createObjectURL(blobFile)
                    // const track = new Audio()
                    // track.src = blobURL
                    // track.play()
                })
                // .then((blob) => {
                //     const track = new Audio()
                //     track.src = URL.createObjectURL(response)
                //     // const blobConvert = response.blob()
                //     // const objectURL =

                //     // track.src = objectURL
                //     track.play()
                // })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }
    </script>
</body>

</html>
